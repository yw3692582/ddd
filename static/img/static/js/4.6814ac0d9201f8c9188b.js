webpackJsonp([4],{VZrM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={formatTime:function(e,t){var a=new Date(e),r=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return r(a.getFullYear());case"MM":return r(a.getMonth()+1);case"mm":return r(a.getMinutes());case"dd":return r(a.getDate());case"HH":return r(a.getHours());case"ss":return r(a.getSeconds())}})}},i={data:function(){return{time:"",eid:"",feature_filter:"",tableData:[],elements:[],stations:[],obj:[],eid_key:[],feature_filter_key:[],page:1,numbers:0,rowIndex:"",columnIndex:"",s:[],size:"17",loading:!1,currentPage1:null}},methods:{getRowClass:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"background:#f1f3fa;color:rgba(0,0,0,85);border-color: #eeeeee;"},handleCurrentChange:function(e){var t=this;this.page=e;var a=this.$ajax.defaults.headers.common;a.token=localStorage.getItem("token"),a.username=localStorage.getItem("user_name"),this.$ajax.post("/features_his",{start_time:this.time[0],end_time:this.time[1],eid:this.eid_key,feature_filter:this.feature_filter_key,page:this.page,size:this.size.toString()}).then(function(e){if(-1==e.data.code)return alert("登录已失效,请重新登录!"),localStorage.clear(),void t.$router.push("/");var a=e.data.records;t.tableData=a,t.numbers=e.data.numbers;for(var i=0;i<a.length;i++){var s=a[i].obs_date,n=r.formatTime(1e3*s,"yyyy-MM-dd HH:mm:ss");a[i].obs_date=n}}).catch(function(e){console.log("")})},selectStation:function(e){this.eid=e},selectStations:function(e){this.feature_filter=e},b:function(){var e=this;if(this.loading=!0,this.page=1,this.currentPage1=1,""==this.time||""==this.eid)return this.$message({type:"warning",message:"参数不能为空"}),void(this.loading=!1);for(var t=0;t<this.time.length;t++){var a=this.time[t],i=Math.round(a);this.time[t]=i}this.eid_key=[];for(var s=0;s<this.eid.length;s++)this.eid_key.push(this.eid[s].key);this.feature_filter_key=[];for(var n=0;n<this.feature_filter.length;n++)this.feature_filter_key.push(this.feature_filter[n].key);this.s=[];var l=this.$ajax.defaults.headers.common;l.token=localStorage.getItem("token"),l.username=localStorage.getItem("user_name"),this.$ajax.post("/features_his",{start_time:this.time[0],end_time:this.time[1],eid:this.eid_key,feature_filter:this.feature_filter_key,page:this.page,size:this.size.toString()}).then(function(t){if(-1==t.data.code)return alert("登录已失效,请重新登录!"),localStorage.clear(),void e.$router.push("/");e.loading=!1;var a=t.data.records;e.tableData=a,e.numbers=t.data.numbers;for(var i=0;i<a.length;i++)e.s.push(a[i].q_code);switch(e.feature_filter.length){case 0:e.obj=[{label:"站台",prop:"name",fixed:"left",width:"559px"},{label:"地址",prop:"address",fixed:"left",width:"559px"},{label:"时间",prop:"obs_date",fixed:"left",width:"559px"}];break;default:e.obj=[{label:"站台",prop:"name",fixed:"left",width:"200px"},{label:"地址",prop:"address",fixed:"left",width:"310px"},{label:"时间",prop:"obs_date",fixed:"left",width:"200px"}]}for(var s=0;s<e.feature_filter.length;s++)e.obj.push({label:e.feature_filter[s].value,prop:e.feature_filter[s].key});for(var n=0;n<a.length;n++){var l=a[n].obs_date,o=r.formatTime(1e3*l,"yyyy-MM-dd HH:mm:ss");a[n].obs_date=o}}).catch(function(e){console.log(e)})},resolution:function(){var e=screen.width,t=document.querySelectorAll(".el-select"),a=document.querySelectorAll(".demonstration"),r=document.querySelectorAll(".el-date-editor.el-range-editor.el-input__inner.el-date-editor--daterange");switch(e){case 1600:case 1440:case 1400:t[1].style.width="200px";for(var i=0;i<a.length;i++)a[i].style.marginLeft="6px";this.size="13";break;case 1360:case 1366:t[1].style.width="200px";for(var s=0;s<a.length;s++)a[s].style.marginLeft="6px";r[0].style.width="250px",this.size="10"}},feature:function(){var e=this,t=this.$ajax.defaults.headers.common;t.token=localStorage.getItem("token"),t.username=localStorage.getItem("user_name"),this.$ajax.post("/reverse_features").then(function(t){if(-1==t.data.code)return alert("登录已失效,请重新登录!"),localStorage.clear(),void e.$router.push("/");e.elements=t.data.records}).catch(function(e){console.log(e)})},equ:function(){var e=this,t=this.$ajax.defaults.headers.common;t.token=localStorage.getItem("token"),t.username=localStorage.getItem("user_name"),this.$ajax.post("/equip_name",{e_code:"0101"}).then(function(t){if(-1==t.data.code)return alert("登录已失效,请重新登录!"),localStorage.clear(),void e.$router.push("/");e.stations=t.data.records}).catch(function(e){console.log(e)})}},mounted:function(){this.feature(),this.equ(),this.resolution()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"block"},[a("div",{staticStyle:{"margin-left":"43px"}},[a("span",{staticClass:"demonstration"},[e._v("选择日期：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("div",{staticClass:"block_1"},[a("span",{staticClass:"demonstration"},[e._v("站台配置：")]),e._v(" "),a("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",clearable:"",multiple:"",placeholder:"搜索/选择站台配置","collapse-tags":!0},on:{change:e.selectStation},model:{value:e.eid,callback:function(t){e.eid=t},expression:"eid"}},e._l(e.stations,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e}})}),1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("要素配置：")]),e._v(" "),a("el-select",{staticStyle:{width:"300px"},attrs:{id:"select_id",filterable:"",clearable:"",multiple:"",placeholder:"搜索/选择要素配置","collapse-tags":""},on:{change:e.selectStations},model:{value:e.feature_filter,callback:function(t){e.feature_filter=t},expression:"feature_filter"}},e._l(e.elements,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e}})}),1),e._v(" "),a("el-button",{staticStyle:{"font-size":"16px",width:"84px","border-radius":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.b()}}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"0 auto"},attrs:{"element-loading-text":"加载中,请稍等","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(245,245,245, 0.8)",data:e.tableData,border:"","max-height":"682","default-sort":{prop:"date",order:"descending"},"row-style":e.getRowClass,"header-row-style":e.getRowClass,"header-cell-style":e.getRowClass}},[e._l(e.obj,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,"min-width":"140px",label:e.label,width:e.width,fixed:e.fixed,align:"center"}})]})],2),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.currentPage1,"page-size":e.size,layout:"total, prev, pager, next, jumper",total:e.numbers},on:{"update:currentPage":function(t){e.currentPage1=t},"update:current-page":function(t){e.currentPage1=t},"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(e){a("ab15")},"data-v-53ebb2ab",null);t.default=n.exports},ab15:function(e,t){}});